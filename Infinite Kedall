-- Infinite Kedall | Chat Command Script
-- Made for Roblox

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

local Player = Players.LocalPlayer
local Char = Player.Character or Player.CharacterAdded:Wait()
local Humanoid = Char:WaitForChild("Humanoid")
local HRP = Char:WaitForChild("HumanoidRootPart")

-- SETTINGS
local noclip = false
local flying = false
local flySpeed = 50
local walkSpeedDefault = 16

-- NOCLIP
RunService.Stepped:Connect(function()
	if noclip and Char then
		for _,v in pairs(Char:GetDescendants()) do
			if v:IsA("BasePart") then
				v.CanCollide = false
			end
		end
	end
end)

-- FLY
local bv, bg
local function startFly()
	if flying then return end
	flying = true

	bv = Instance.new("BodyVelocity")
	bv.Velocity = Vector3.zero
	bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
	bv.Parent = HRP

	bg = Instance.new("BodyGyro")
	bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
	bg.CFrame = HRP.CFrame
	bg.Parent = HRP

	RunService.RenderStepped:Connect(function()
		if not flying then return end
		local cam = workspace.CurrentCamera
		bg.CFrame = cam.CFrame

		local move = Vector3.zero
		if UIS:IsKeyDown(Enum.KeyCode.W) then move += cam.CFrame.LookVector end
		if UIS:IsKeyDown(Enum.KeyCode.S) then move -= cam.CFrame.LookVector end
		if UIS:IsKeyDown(Enum.KeyCode.A) then move -= cam.CFrame.RightVector end
		if UIS:IsKeyDown(Enum.KeyCode.D) then move += cam.CFrame.RightVector end
		if UIS:IsKeyDown(Enum.KeyCode.Space) then move += cam.CFrame.UpVector end
		if UIS:IsKeyDown(Enum.KeyCode.LeftControl) then move -= cam.CFrame.UpVector end

		bv.Velocity = move * flySpeed
	end)
end

local function stopFly()
	flying = false
	if bv then bv:Destroy() end
	if bg then bg:Destroy() end
end

-- CHAT COMMAND
Player.Chatted:Connect(function(msg)
	msg = msg:lower()

	-- NOCLIP
	if msg == "noclip on" then
		noclip = true
	elseif msg == "noclip off" then
		noclip = false
	end

	-- FLY
	if msg == "fly on" then
		startFly()
	elseif msg == "fly off" then
		stopFly()
	end

	-- FLY SPEED
	if msg:sub(1,8) == "flyspeed" then
		local spd = tonumber(msg:match("%d+"))
		if spd then
			flySpeed = math.clamp(spd, 1, 1000)
		end
	end

	-- SPEED WALK
	if msg:sub(1,8) == "speed on" then
		local spd = tonumber(msg:match("%d+"))
		if spd then
			Humanoid.WalkSpeed = math.clamp(spd, 1, 1000)
		end
	elseif msg == "speed off" then
		Humanoid.WalkSpeed = walkSpeedDefault
	end
end)

print("âœ… Infinite Kedall Command Loaded")
